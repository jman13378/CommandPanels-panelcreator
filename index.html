<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet"
  />
  <script src="http://cdn.jsdelivr.net/g/filesaver.js"></script>

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
  />
</head>
<body>
  <script>
          function SaveAsFile(t,f,m) {
            try {
                var b = new Blob([t],{type:m});
                saveAs(b, f);
            } catch (e) {
                window.open("data:"+m+"," + encodeURIComponent(t), '_blank','');
            }
        }
    document.onsubmit = function () {
        let title = document.getElementById("title")
        let name = document.getElementById("panel-name")
        let rows = document.getElementById("rows")
        let perm = document.getElementById("perm")
        let refdelay = document.getElementById("refresh-delay")
        let opensound = document.getElementById("sound-on-open")
        let paneltype = document.getElementsByClassName("panel-type")
        let permmsg = document.getElementById("permission")
        let outsidecmds = document.getElementsByName("OCommand")
        let inputmsg = document.getElementById("input")
        
let finaltext =

`panels:\n`+
`  ${name.value}:\n`+
`    title: "${title.value}"\n`+
`    rows: ${rows.value}\n`;
if (perm==undefined) {
    finaltext=finaltext.concat(`\n    perm: default`)
} else {
    finaltext=finaltext.concat(`\n    perm: ${perm.value}`)
}
if (refdelay.value!=undefined) finaltext=finaltext.concat(`\n    refresh-delay: ${refdelay.value}`);
if (opensound.value!=undefined) finaltext=finaltext.concat(`\n    sound-on-open: ${opensound.value}`);
if (paneltype.length!=0) {
    finaltext=finaltext.concat(`\n    panelType:`);
    for (let i = 0; i < paneltype.length;i++) {
        finaltext=finaltext.concat(`\n    - ${paneltype[i].value}`);
    }
} 
if (outsidecmds.length!=0) {
    finaltext=finaltext.concat(`\n    outside-commands:`);
    for (let i = 0; i < outsidecmds.length;i++) {
        finaltext=finaltext.concat(`\n    - ${outsidecmds[i].value}`);
    }
} 
if (outsidecmds.length!=0) {
    finaltext=finaltext.concat(`\n    outside-commands:`);
    for (let i = 0; i < outsidecmds.length;i++) {
        finaltext=finaltext.concat(`\n    - ${outsidecmds[i].value}`);
    }
} 
window.alert(finaltext)
SaveAsFile(finaltext,`${name.value}.yml`,"text/plain;charset=utf-8")
    
    }


    function createNewOC() {
      var element = document.getElementById("Ocommands");
      let outsidecmds = document.getElementsByName("OCommand")
      element.insertAdjacentHTML(
        "beforeend",
        `<div class="row"></div><div class="input-field col s6"><input id="command${outsidecmds.length+1}" name="OCommand"><label for="command${outsidecmds.length+1}">Outside Command</label></div>`
      );
    }
    function CreateItem() {
      var element = document.getElementsByClassName("collapsible")[0];
      element.insertAdjacentHTML(
        "beforeend",
        '<li><div class="collapsible-header"><i class="material-icons">arrow_drop_down</i></div><div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div></li>'
      );
    }
  </script>
  

  <nav style="background-color: #0C9DC1; position: fixed; top: 0px;">
    <div class="nav-wrapper">
      <img class="responsive-img circle brand-logo center" style="height:100%;" src="https://commandpanels.com/data/assets/logo/cpBannerNoSubtitle.png">
            <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="https://commandpanels.com/">Home</a></li>
        <li><a href="https://rockyhawk99.gitbook.io/rockyhawk-wiki/commandpanels/wiki">Wiki</a></li>
        <li><a href="https://www.spigotmc.org/resources/command-panels-custom-guis.67788/">Spigot</a></li>
        <li><a href="https://github.com/rockyhawk64/CommandPanels/releases/latest/download/CommandPanels.jar">Download</a></li>
      </ul>
    </div>
  </nav>
        
  <form style="margin-left: 15%; margin-right: 15%; margin-top: 10%;">
    <div id="settings">
      <h1>Panel Settings</h1>
      <h5>View <a href="https://rockyhawk99.gitbook.io/rockyhawk-wiki/commandpanels/wiki/panel-editing/panel-settings">this</a> for all of the settings!</h5>
      <div class="row">
        <div class="input-field col s6">
          <input id="panel-name" class="validate" type="text" /><label
            for="panel-name"
            >Panel Name</label
          >
        </div>
        <div class="input-field col s6">
          <input id="title" required type="text" class="validate" /><label
            for="title"
            >Panel Title</label
          >
        </div>
      </div>
      <div class="row">
        <div class="input-field col s1">
          <input id="rows" required class="validate" type="text" /><label
            for="rows"
            >Rows</label
          >
        </div>
        <div class="input-field col s2">
          <input id="refresh-delay" type="text" class="validate" /><label
            for="refresh-delay"
            >Refresh Delay</label
          >
        </div>
        <div class="input-field col s6">
          <input id="sound-on-open" type="text" class="validate" /><label
            for="sound-on-open"
            >Open Sound</label
          >
        </div>
        <div class="input-field col s3">
            <input id="perm" type="text" class="validate" /><label
              for="perm"
              >Open Perm</label
            >
          </div>
      </div>

      <div class="row">
        <div class="input-field col s12">
          <h5>Panel Type(s)</h5>
          View <a href="https://rockyhawk99.gitbook.io/rockyhawk-wiki/commandpanels/wiki/panel-editing/panel-settings#panel-type">this</a> for info on what these are!
          <br />
          <p style="display: flex; justify-content: space-evenly">
            <label>
              <input type="checkbox" value="static" class="panel-type"/>
              <span>static</span>
            </label>
            <label>
              <input type="checkbox" value="nocommand" class="panel-type"/>
              <span>nocommand</span>
            </label>
            <label>
              <input type="checkbox" value="nocommandregister" class="panel-type"/>
              <span>nocommandregister</span>
            </label>
            <label>
              <input type="checkbox" value="unmovable" class="panel-type"/>
              <span>unmovable</span>
            </label>
            <label>
              <input type="checkbox" value="unclosable" class="panel-type"/>
              <span>unclosable</span>
            </label>
          </p>
        </div>
      </div>
      <h5>Custom Messages</h5>
      View <a href="https://rockyhawk99.gitbook.io/rockyhawk-wiki/commandpanels/wiki/panel-editing/panel-settings#custom-messages">this</a> for info on what these are!
      <div class="row">
        <div class="input-field col s6">
          <textarea id="permission" class="materialize-textarea"></textarea
          ><label for="permission">Permission</label>
        </div>
        <div class="row"></div>
        <div class="input-field col s6">
          <textarea id="input" class="materialize-textarea"></textarea
          ><label for="input">Input</label>
        </div>
      </div>
      <h6>Outside Commands</h6>
      <a class="waves-effect waves-light btn" onclick="createNewOC()">Create Command</a>
      <div id="Ocommands">
        <div class="row"></div>
          <div class="input-field col s6">
            <input id="command" name="OCommand">
            <label for="command">Outside Command</label>
          </div>
          
      </div>
    </div>

    <div id="items">
      <h1>Items</h1>
      <h6>EG "Slot 1" THIS IS NOT THE ACTUAL SLOT NUMBER It will be used as the id for the slot</h6>
      <a class="waves-effect waves-light btn" onclick="CreateItem()">Create item</a>
      <ul class="collapsible">
        <li>
          <div class="collapsible-header">
            <i class="material-icons">arrow_drop_down</i>Slot 1
          </div>
          <div class="collapsible-body">
            <div class="row">
              <div class="input-field col s6">
                <input id="item-1-item-name"  class="validate" type="text" /><label
                  for="item-1-item-name"
                  >Item Name</label
                >
              </div>
              <div class="input-field col s6">
                <input id="item-1-item-material" required class="validate" type="text" /><label
                  for="item-1-item-material"
                  >Item Material</label
                >
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <h6>Item Types(s)</h6>
                <br />
                <p style="display: flex; justify-content: space-evenly">
                  <label>
                    <input type="checkbox" value="placeable" class="item-type1"/>
                    <span>placeable</span>
                  </label>
                  <label>
                    <input type="checkbox" value="noAttributes" class="item-type1"/>
                    <span>noAttributes</span>
                  </label>
                  <label>
                    <input type="checkbox" value="noNBT" class="item-type1"/>
                    <span>noNBT</span>
                  </label>
                  <label>
                    <input type="checkbox" value="dropItem" class="item-type1"/>
                    <span>dropItem</span>
                  </label>
                  <label>
                    <input type="checkbox" value="removeItem" class="item-type1"/>
                    <span>removeItem</span>
                  </label>
                </p>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s2">
                <input id="item-1-item-id"  class="validate" type="text" /><label
                  for="item-1-item-id"
                  >Item ID</label
                >
              </div>
              <div class="input-field col s2">
                <input id="item-1-item-stack" class="validate" type="text" /><label
                  for="item-1-item-stack"
                  >Item Stack</label
                >
              </div>
              <div class="input-field col s3">
                <input id="item-1-item-data" class="validate" type="text" /><label
                  for="item-1-item-data"
                  >Custom data</label
                >
              </div>
              <div class="input-field col s3">
                <input id="item-1-item-damage" class="validate" type="text" /><label
                  for="item-1-item-damage"
                  >Item Damage</label
                >
              </div>
              <div class="input-field col s2">
                <input id="item-1-item-damage" class="validate" type="text" /><label
                  for="item-1-item-damage"
                  >Item Damage</label
                >
              </div>
            </div> 
          </div>
        </li>
      </ul>
    </div>
    
  <button class="btn waves-effect waves-light" type="submit" name="action">Create Panel
    <i class="material-icons right">save_as</i>
  </button>
  </form>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    M.AutoInit();
  </script>
</body>

<footer>

    <div style="margin-left: 75%;">
    <i class="material-icons">copyright</i> CopyRight 2022 - Jonathan_Nathan</div>
</footer>
